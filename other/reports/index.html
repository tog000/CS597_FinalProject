<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<meta charset="utf-8" />
		<title>Dead Animal Pickups</title>
		<style>
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
			}
			#map_canvas {
				border:4px solid gray;
				margin:10px auto;
				width:1000px;
				height:900px;
			}
			
		</style>
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
		<script>
			var dead_animals = "41.8083513059445,-87.61942179048617|41.86718016027399,-87.70339961262758|41.87447831833962,-87.73756356305952|41.6915470623843,-87.6249949259286|41.7476144902257,-87.59678506458582|41.8613063194497,-87.73711684230882|41.88061318391244,-87.74476637208755|41.75459593283084,-87.56493039957002|41.67763009503862,-87.64204833039014|41.73351389773781,-87.56079259325227|41.75837535473182,-87.60677047483752|41.748490875084265,-87.58926633661798|41.75991372328811,-87.65412617350472|41.804088736142894,-87.59499794258467|41.90383655477978,-87.70971041041454|41.84594559097094,-87.72798870445133|41.76502537107676,-87.57709276163146|41.75246514001244,-87.63616653968421|41.7000003663947,-87.62200932649169|41.7511305460301,-87.60289794214209|41.83980625479324,-87.61504285037222|41.77109670246746,-87.6083168962895|41.7909011624467,-87.62575032722735|41.87115165024314,-87.7422206509632|41.75703611963164,-87.66982467083572|41.9384434571263,-87.78487060353032|41.738144934972865,-87.61471857196581|41.74718294391949,-87.66442571353623|41.70394165222404,-87.60716024323446|41.872753437415994,-87.73044184479838|41.76014044528342,-87.64656239023446|41.7890158173841,-87.64151666152345|41.77855993457156,-87.66561025652172|41.862830648295464,-87.630134070676|41.90443639496562,-87.72174259551579|41.75067855563925,-87.60259523163838|41.7642578220869,-87.60353347918524|41.74393858786047,-87.61347039821999|41.873051962729036,-87.74514416800078|42.01949551722541,-87.67317900024723|41.80841610361775,-87.67482975313462|41.7843221190506,-87.63545853753634|41.93229533776209,-87.70238077935011|41.77953330600473,-87.61717141360788|41.65367457139669,-87.59952853949079|41.75017204164671,-87.66357746024563|41.88427287807757,-87.66248355748283|41.86606016151465,-87.72522908770249|41.85892124828297,-87.7116961072563|41.77927991950476,-87.66436356727144|41.74282886974836,-87.60028782068561|41.737603816906606,-87.65110404048286|41.879719140887296,-87.7384879847303|41.82942785714012,-87.60986057800432|41.744176501108164,-87.59517174713734|41.75865909434518,-87.64803691704284|41.775678828829456,-87.69316176672591|41.798671537117784,-87.74359502185544|41.755503505264954,-87.62324027509871|41.75561090940198,-87.66493193568431|41.87883413559674,-87.6782309788413|41.789863948185456,-87.6461132107249|41.773310304070165,-87.66517346387133|41.77410094402126,-87.61562612653962|41.721824278307615,-87.6235122998485|41.657943913941104,-87.61591094385275|41.859729582500684,-87.6515144614962|41.80863859114992,-87.61400463029027|41.87087625392283,-87.6850789323459|41.73655999456668,-87.61800077294784|41.896780588463294,-87.62670577851728|41.907549308694364,-87.75803444927104|41.761431985935594,-87.5665752055798|41.72345398232432,-87.6252233712798|41.77209434579078,-87.65809252296663|41.968454848684715,-87.71838010731203|41.858978661451395,-87.70560188195951|41.925772786730974,-87.72328802018801|41.76312374599066,-87.6493639404899|41.912282336583374,-87.6665586478933|41.876883041201474,-87.74570021776194|41.89507062208364,-87.75083359859487|41.74311076621395,-87.65326996187508|41.81664116935552,-87.68699083405018|41.71029622038813,-87.65036738131435|41.75123561865571,-87.6466353292065|41.8660396476382,-87.72136708485793|41.87338156093334,-87.72156141761553|41.68133415675439,-87.61682629766514|41.74898957328944,-87.58957206889916|41.9207709045187,-87.69714803817364|41.75058613690361,-87.56364427592352|41.80469332061867,-87.61372599834597|41.86276312930499,-87.69467638131513|41.8975381527725,-87.75581393225478|41.795827263151914,-87.67804648236965|41.808173036722756,-87.70844562528686|41.72173465483593,-87.6245535938707|41.793440456536494,-87.65500448816866|41.91076832370639,-87.75585266664774";
			
			var map = null;
			var template = null;

			function initialize() {

				var mapOptions = {
					zoom: 11,
					center: new google.maps.LatLng(41.925546, -87.806312),
					mapTypeId: google.maps.MapTypeId.ROADMAP
				}

				map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

				var heatmap_points = setMarkers(map, dead_animals.split("|"));

				var pointArray = new google.maps.MVCArray(heatmap_points);

				 heatmap = new google.maps.visualization.HeatmapLayer({
				 	data: pointArray
				 });

				heatmap.setMap(heatmap.getMap() ? null : map);
				heatmap.setOptions({radius: heatmap.get('radius') ? null : 20});

				heatmap.setMap(map);

			}

			function setMarkers(map, points) {

				var markers = []

				var heatmap_points = [];

				for (var i = 0; i < points.length; i++) {
					var dead_animal = points[i].split(",");

					heatmap_points.push(new google.maps.LatLng(parseFloat(dead_animal[0]), parseFloat(dead_animal[1])));
					
					// var marker = new google.maps.Marker({
					// 	position: new google.maps.LatLng(parseFloat(dead_animal[0]), parseFloat(dead_animal[1])),
					// 	map: map,
					// 	title: "Dead Animal #"+i
					// });
					// console.log("Added marker"+dead_animal[0])
					
					//marker.index = i

					//markers.push(marker)
					
				}

				return heatmap_points;
			}

			google.maps.event.addDomListener(window, 'load', initialize);
			
		</script>
	</head>
	<body>
		<div id="infoWindowTemplate" style="display:none">
			<div id="infoWindow">
				<h1>%s</h1>
				<span class="owner">%s %s</span>
				<p>%s<br/>%s %s<br/>%s</p>
				<div class="stars" style="width:%spx">&nbsp;</div>
				<span class="rating">%s</span>
			</div>
		</div>
		<div id="map_canvas"></div>
	</body>
</html>